# JimLang 寮€鍙戣鍒?(Development Roadmap)

## 椤圭洰鐜扮姸鍒嗘瀽

### 鉁?宸插疄鐜扮殑鍔熻兘

#### 1. 鍩虹璁炬柦
- 鉁?ANTLR 4 璇硶瀹氫箟
- 鉁?Lexer/Parser 鑷姩鐢熸垚
- 鉁?AST Visitor 妯″紡瑙ｉ噴鍣?
- 鉁?鍩烘湰鐨?REPL 浜や簰寮忕幆澧?
- 鉁?JSR-223 ScriptEngine 闆嗘垚
- 鉁?Maven 鏋勫缓绯荤粺

#### 2. 璇█鐗规€?
- 鉁?鍙橀噺澹版槑锛歚var x = 10`
- 鉁?鍙€夌被鍨嬫敞瑙ｏ細`var name: string = "jim"`
- 鉁?鍑芥暟瀹氫箟锛歚function add(a, b) { return a + b }`
- 鉁?鍑芥暟璋冪敤
- 鉁?鍩烘湰鏁版嵁绫诲瀷锛歯umber, string, boolean
- 鉁?鍩烘湰绠楁湳杩愮畻绗︼細+, -, *, /
- 鉁?姣旇緝杩愮畻绗︼細<, >, <=, >=, ==, !=
- 鉁?閫昏緫杩愮畻绗︼細&&, ||
- 鉁?娉ㄩ噴锛氬崟琛?`//` 鍜屽琛?`/* */`

#### 3. 鍐呯疆鍑芥暟
- 鉁?`print()` - 杈撳嚭涓嶆崲琛?
- 鉁?`println()` - 杈撳嚭骞舵崲琛?

### 鈿狅笍 瀛樺湪鐨勯棶棰?

#### 1. REPL 鐩稿叧
- 鉂?姣忔杈撳叆閮介噸鏂拌В鏋愶紝鏃犳硶淇濇寔鐘舵€?
- 鉂?澶氳杈撳叆浣撻獙涓嶄匠锛堥渶瑕佷娇鐢?`\` 缁锛?
- 鉂?閿欒鎻愮ず涓嶅弸濂?
- 鉂?娌℃湁鍛戒护鍘嗗彶鍜岃ˉ鍏ㄥ姛鑳?
- 鉂?鏃犳硶鍦?REPL 涓煡鐪嬪凡瀹氫箟鐨勫彉閲忓拰鍑芥暟

#### 2. 瑙ｉ噴鍣ㄦ牳蹇?
- 鉂?**浣滅敤鍩熺鐞嗕笉瀹屾暣**锛歋cope 绫诲畾涔変簡浣嗘湭鐪熸瀹炵幇
- 鉂?**鍑芥暟鍙傛暟浼犻€掍笉瀹屾暣**锛氬弬鏁板畾涔変簡浣嗚皟鐢ㄦ椂鏈粦瀹?
- 鉂?**绠楁湳杩愮畻纭紪鐮?*锛氬彧鏀寔鏁存暟鍔犳硶锛屽叾浠栬繍绠楁湭瀹炵幇
- 鉂?**绫诲瀷绯荤粺涓嶅畬鏁?*锛氬畾涔変簡绫诲瀷浣嗘湭鍋氱被鍨嬫鏌?
- 鉂?**閿欒澶勭悊绠€闄?*锛氬紓甯镐俊鎭笉娓呮櫚
- 鉂?**绗﹀彿琛ㄤ娇鐢ㄥ叏灞€ Hashtable**锛氬簲璇ヤ娇鐢ㄥ垎灞備綔鐢ㄥ煙

#### 3. 缂哄け鐨勬牳蹇冪壒鎬?
- 鉂?鎺у埗娴侊細if/else, while, for
- 鉂?鏁扮粍/鍒楄〃
- 鉂?瀵硅薄/瀛楀吀
- 鉂?瀛楃涓叉搷浣?
- 鉂?鏂囦欢 I/O
- 鉂?閿欒澶勭悊鏈哄埗锛坱ry/catch锛?

---

## 寮€鍙戣矾绾垮浘

### 馃幆 Phase 1: 鏍稿績淇涓?REPL 澧炲己 (浼樺厛绾э細楂?

**鐩爣**锛氫慨澶嶇幇鏈夐棶棰橈紝璁?REPL 鐪熸鍙敤

#### 1.1 淇鍑芥暟鍙傛暟浼犻€掓満鍒?
- **闂**锛氬嚱鏁板畾涔変簡鍙傛暟锛屼絾璋冪敤鏃舵湭姝ｇ‘缁戝畾
- **浠诲姟**锛?
  - [ ] 鍦ㄥ嚱鏁拌皟鐢ㄦ椂鍒涘缓鏂扮殑灞€閮ㄤ綔鐢ㄥ煙
  - [ ] 灏嗗疄鍙傜粦瀹氬埌褰㈠弬
  - [ ] 鏀寔鍑芥暟鍐呰闂弬鏁板€?
  - [ ] 娣诲姞鍙傛暟鏁伴噺妫€鏌?
- **娴嬭瘯鐢ㄤ緥**锛?
  ```jim
  function add(a, b) { return a + b }
  var result = add(5, 3)
  println(result)  // 搴旇緭鍑?8
  ```

#### 1.2 瀹屽杽浣滅敤鍩熺鐞?
- **闂**锛歋cope 绫诲瓨鍦ㄤ絾鏈浣跨敤锛屽鑷村彉閲忎綔鐢ㄥ煙娣蜂贡
- **浠诲姟**锛?
  - [ ] 瀹炵幇鍒嗗眰浣滅敤鍩熼摼
  - [ ] 鍑芥暟浣撳唴鍒涘缓鏂颁綔鐢ㄥ煙
  - [ ] 瀹炵幇鍙橀噺鏌ユ壘閾撅紙褰撳墠浣滅敤鍩?鈫?鐖朵綔鐢ㄥ煙 鈫?鍏ㄥ眬浣滅敤鍩燂級
  - [ ] 鏀寔鍙橀噺閬斀锛坰hadowing锛?
- **娴嬭瘯鐢ㄤ緥**锛?
  ```jim
  var x = 10
  function test() {
    var x = 20
    println(x)  // 搴旇緭鍑?20
  }
  test()
  println(x)    // 搴旇緭鍑?10
  ```

#### 1.3 瀹炵幇瀹屾暣鐨勭畻鏈拰瀛楃涓茶繍绠?
- **闂**锛氱洰鍓嶅彧瀹炵幇浜嗘暣鏁板姞娉?
- **浠诲姟**锛?
  - [ ] 瀹炵幇鎵€鏈夌畻鏈繍绠楋細+, -, *, /, % (鍙栨ā)
  - [ ] 鏀寔娴偣鏁拌繍绠?
  - [ ] 瀛楃涓叉嫾鎺?
  - [ ] 绫诲瀷鑷姩杞崲锛堝 string + number锛?
  - [ ] 姣旇緝杩愮畻绗﹀疄鐜?
  - [ ] 閫昏緫杩愮畻绗﹀疄鐜?
- **娴嬭瘯鐢ㄤ緥**锛?
  ```jim
  var a = 10 * 2 + 5
  var b = "Hello " + "World"
  var c = 10 > 5
  println(a)  // 25
  println(b)  // Hello World
  println(c)  // true
  ```

#### 1.4 鏀硅繘 REPL 浣撻獙
- **浠诲姟**锛?
  - [ ] **鎸佷箙鍖栫姸鎬?*锛氬湪 REPL 涓繚鎸佸彉閲忓拰鍑芥暟瀹氫箟
  - [ ] **鍛戒护鏀寔**锛?
    - `:vars` - 鏄剧ず鎵€鏈夊彉閲?
    - `:funcs` - 鏄剧ず鎵€鏈夊嚱鏁?
    - `:clear` - 娓呴櫎鎵€鏈夊畾涔?
    - `:help` - 鏄剧ず甯姪
    - `:exit` 鎴?`:quit` - 閫€鍑猴紙鏇挎崲 `exit()`锛?
  - [ ] **鏀硅繘澶氳杈撳叆**锛氳嚜鍔ㄦ娴嬭鍙ユ槸鍚﹀畬鏁达紙妫€鏌ユ嫭鍙峰尮閰嶏級
  - [ ] **鏇村ソ鐨勯敊璇彁绀?*锛氭樉绀鸿鍙峰拰閿欒浣嶇疆
  - [ ] **鍚姩妯箙**锛氭樉绀虹増鏈俊鎭拰甯姪鎻愮ず

**棰勮鏃堕棿**锛?-3 鍛?
**閲岀▼纰?*锛歊elease v0.2.0 - "绋冲畾鐨?REPL"

---

### 馃幆 Phase 2: 鎺у埗娴佷笌鏁版嵁缁撴瀯 (浼樺厛绾э細楂?

**鐩爣**锛氬鍔犲熀鏈殑鎺у埗娴佸拰鏁版嵁缁撴瀯鏀寔

#### 2.1 瀹炵幇 if/else 鏉′欢璇彞
- **璇硶璁捐**锛?
  ```jim
  if (condition) {
    // statements
  } else if (condition) {
    // statements
  } else {
    // statements
  }
  ```
- **浠诲姟**锛?
  - [ ] 鎵╁睍 ANTLR 璇硶
  - [ ] 瀹炵幇 visitor 閫昏緫
  - [ ] 鏀寔宓屽 if
  - [ ] 娣诲姞娴嬭瘯鐢ㄤ緥

#### 2.2 瀹炵幇寰幆璇彞
- **while 寰幆**锛?
  ```jim
  var i = 0
  while (i < 5) {
    println(i)
    i = i + 1
  }
  ```
- **for 寰幆**锛?
  ```jim
  for (var i = 0; i < 5; i = i + 1) {
    println(i)
  }
  ```
- **浠诲姟**锛?
  - [ ] 瀹炵幇 while 寰幆
  - [ ] 瀹炵幇 for 寰幆
  - [ ] 鏀寔 break 鍜?continue
  - [ ] 闃叉鏃犻檺寰幆锛堝彲閫夛細娣诲姞鎵ц姝ユ暟闄愬埗锛?

#### 2.3 瀹炵幇鏁扮粍
- **璇硶璁捐**锛?
  ```jim
  var arr = [1, 2, 3, 4, 5]
  println(arr[0])        // 1
  arr[1] = 10
  println(arr.length)    // 5
  ```
- **浠诲姟**锛?
  - [ ] 鏁扮粍瀛楅潰閲忚娉?
  - [ ] 绱㈠紩璁块棶锛堣鍐欙級
  - [ ] 鍐呯疆灞炴€э細length
  - [ ] 鍐呯疆鏂规硶锛歱ush, pop, shift, unshift

#### 2.4 瀹炵幇瀵硅薄/瀛楀吀
- **璇硶璁捐**锛?
  ```jim
  var person = {
    name: "Jim",
    age: 25
  }
  println(person.name)
  person.age = 26
  ```
- **浠诲姟**锛?
  - [ ] 瀵硅薄瀛楅潰閲忚娉?
  - [ ] 灞炴€ц闂紙鐐瑰彿鍜屾柟鎷彿锛?
  - [ ] 灞炴€ц祴鍊?
  - [ ] 宓屽瀵硅薄鏀寔

**棰勮鏃堕棿**锛?-4 鍛?
**閲岀▼纰?*锛歊elease v0.3.0 - "瀹屾暣鐨勫熀纭€璇硶"

---

### 馃幆 Phase 3: 鏍囧噯搴撴墿灞?(浼樺厛绾э細涓?

**鐩爣**锛氭彁渚涘父鐢ㄧ殑鍐呯疆鍑芥暟搴?

#### 3.1 瀛楃涓叉搷浣?
```jim
var s = "Hello World"
println(s.length())           // 11
println(s.toUpperCase())      // HELLO WORLD
println(s.substring(0, 5))    // Hello
println(s.indexOf("World"))   // 6
println(s.split(" "))         // ["Hello", "World"]
```

#### 3.2 鏁扮粍鎿嶄綔
```jim
var arr = [1, 2, 3, 4, 5]
println(arr.map(function(x) { return x * 2 }))    // [2, 4, 6, 8, 10]
println(arr.filter(function(x) { return x > 2 })) // [3, 4, 5]
println(arr.reduce(function(a, b) { return a + b }, 0)) // 15
```

#### 3.3 鏁板鍑芥暟
```jim
println(Math.max(1, 2, 3))    // 3
println(Math.min(1, 2, 3))    // 1
println(Math.abs(-5))         // 5
println(Math.round(3.7))      // 4
println(Math.random())        // 0.xxx
```

#### 3.4 鏂囦欢鍜?I/O
```jim
var content = File.read("test.txt")
File.write("output.txt", "Hello")
println(File.exists("test.txt"))
```

**棰勮鏃堕棿**锛?-3 鍛?
**閲岀▼纰?*锛歊elease v0.4.0 - "瀹炵敤鏍囧噯搴?


#### 3.5 更多内置函数（TODO）
- contains(s, sub), replace(s, from, to)
- startsWith(s, prefix), endsWith(s, suffix)
- padLeft(s, n[, ch]), padRight(s, n[, ch]), repeat(s, n)
- pow(x, y), sqrt(x), floor(x), ceil(x), randomRange(min, max)
- file_append(path, content)
---

### 馃幆 Phase 4: 楂樼骇鐗规€?(浼樺厛绾э細涓?

#### 4.1 闂寘鏀寔
```jim
function makeCounter() {
  var count = 0
  return function() {
    count = count + 1
    return count
  }
}
var counter = makeCounter()
println(counter())  // 1
println(counter())  // 2
```

#### 4.2 Lambda 琛ㄨ揪寮?
```jim
var add = (a, b) => a + b
var square = x => x * x
```

#### 4.3 閿欒澶勭悊
```jim
try {
  // risky code
} catch (e) {
  println("Error: " + e)
}
```

#### 4.4 妯″潡绯荤粺
```jim
// math.jim
export function add(a, b) { return a + b }

// main.jim
import { add } from "math.jim"
println(add(1, 2))
```

**棰勮鏃堕棿**锛?-5 鍛?
**閲岀▼纰?*锛歊elease v0.5.0 - "楂樼骇鐗规€?

---

### 馃幆 Phase 5: 宸ュ叿閾惧拰鐢熸€?(浼樺厛绾э細浣?

#### 5.1 璋冭瘯鍣?
- [ ] 鏂偣鏀寔
- [ ] 鍗曟鎵ц
- [ ] 鍙橀噺鐩戣
- [ ] 璋冪敤鏍堟煡鐪?

#### 5.2 鍖呯鐞嗗櫒
- [ ] 鍖呭畾涔夋枃浠讹紙jim.json锛?
- [ ] 渚濊禆绠＄悊
- [ ] 涓ぎ浠撳簱

#### 5.3 IDE 鏀寔
- [ ] VS Code 鎻掍欢
  - 璇硶楂樹寒
  - 浠ｇ爜琛ュ叏
  - 閿欒妫€鏌?
  - 璋冭瘯鏀寔
- [ ] IntelliJ IDEA 鎻掍欢

#### 5.4 鏂囨。鐢熸垚鍣?
- [ ] 浠庢敞閲婄敓鎴愭枃妗?
- [ ] API 鏂囨。缃戠珯

**棰勮鏃堕棿**锛氬緟瀹?
**閲岀▼纰?*锛歊elease v1.0.0 - "鐢熶骇灏辩华"

---

## 杩戞湡閲嶇偣浠诲姟 (鎺ヤ笅鏉?2 鍛?

### 绗?1 鍛?
1. **淇鍑芥暟鍙傛暟浼犻€?* (JimLangVistor.java:237-266)
   - 鍦?visitFunctionCall 涓垱寤烘柊鐨勪綔鐢ㄥ煙
   - 缁戝畾瀹炲弬鍒板舰鍙?
   - 娴嬭瘯鍚勭鍙傛暟鍦烘櫙

2. **瀹炵幇瀹屾暣鐨勭畻鏈繍绠?* (JimLangVistor.java:168-219)
   - 閲嶆瀯 visitExpressionStatement
   - 鏀寔鎵€鏈変簩鍏冭繍绠楃
   - 娣诲姞绫诲瀷妫€鏌ュ拰杞崲

3. **鏀硅繘 REPL 鐘舵€佹寔涔呭寲** (Repl.java:23-39)
   - 鍦ㄥ惊鐜鍒涘缓 visitor
   - 瀹炵幇绱Н寮忚В鏋愶紙杩藉姞鏂板畾涔夎€岄潪閲嶆柊瑙ｆ瀽锛?

### 绗?2 鍛?
1. **瀹炵幇鍒嗗眰浣滅敤鍩熺鐞?*
   - 閲嶆瀯绗﹀彿琛ㄤ负浣滅敤鍩熸爤
   - 瀹炵幇鍙橀噺鏌ユ壘閾?
   - 娴嬭瘯宓屽浣滅敤鍩?

2. **娣诲姞 REPL 鍛戒护**
   - `:vars`, `:funcs`, `:help`, `:exit`
   - 鏀硅繘閿欒鎻愮ず

3. **澧炲姞娴嬭瘯瑕嗙洊鐜?*
   - 涓烘墍鏈夋柊鍔熻兘缂栧啓鍗曞厓娴嬭瘯
   - 娣诲姞 REPL 闆嗘垚娴嬭瘯

---

## 娴嬭瘯绛栫暐

### 鍗曞厓娴嬭瘯
- 姣忎釜鏂板姛鑳藉繀椤绘湁瀵瑰簲鐨勫崟鍏冩祴璇?
- 鐩爣浠ｇ爜瑕嗙洊鐜囷細80%+

### 闆嗘垚娴嬭瘯
- REPL 浜や簰鍦烘櫙娴嬭瘯
- 绔埌绔剼鏈墽琛屾祴璇?

### 鎬ц兘娴嬭瘯
- 澶ф枃浠惰В鏋愭€ц兘
- 閫掑綊鍑芥暟璋冪敤鎬ц兘
- 鍐呭瓨浣跨敤鐩戞帶

---

## 鍙傝€冭祫婧?

### 瀛︿範鏉愭枡
- **銆婄紪绋嬭瑷€瀹炵幇妯″紡銆?* - Terence Parr (ANTLR 浣滆€?
- **銆奀rafting Interpreters銆?* - Robert Nystrom (寮虹儓鎺ㄨ崘!)
- **銆婄紪璇戝師鐞嗐€?* (榫欎功)

### 绫讳技椤圭洰
- **Lua** - 绠€娲佺殑鑴氭湰璇█
- **Python** - REPL 璁捐鍙傝€?
- **JavaScript** - 璇硶鍙傝€?
- **Lox** - Crafting Interpreters 涔︿腑鐨勭ず渚嬭瑷€

### 宸ュ叿
- ANTLR 4 瀹樻柟鏂囨。锛歨ttps://www.antlr.org/
- ANTLR Lab锛氬彲瑙嗗寲璇硶娴嬭瘯宸ュ叿

---

## 璐＄尞鎸囧崡

### 濡備綍鍙備笌
1. 閫夋嫨涓€涓换鍔★紙浠?Phase 1 寮€濮嬶級
2. 鍒涘缓 feature 鍒嗘敮
3. 瀹炵幇鍔熻兘骞剁紪鍐欐祴璇?
4. 鎻愪氦 Pull Request

### 浠ｇ爜瑙勮寖
- 閬靛惊鐜版湁浠ｇ爜椋庢牸
- 娣诲姞蹇呰鐨勬敞閲婏紙鐗瑰埆鏄鏉傜殑閫昏緫锛?
- 鏇存柊鏂囨。

### 鎻愪氦淇℃伅鏍煎紡
```
[绫诲瀷] 绠€鐭弿杩?

璇︾粏璇存槑锛堝彲閫夛級

鍏宠仈 Issue: #123
```

绫诲瀷锛歠eat, fix, refactor, test, docs, chore

---

## 鐗堟湰瑙勫垝

| 鐗堟湰 | 鍔熻兘 | 棰勮鍙戝竷 |
|------|------|----------|
| v0.2.0 | 淇鏍稿績闂 + REPL 澧炲己 | 2-3 鍛?|
| v0.3.0 | 鎺у埗娴?+ 鏁版嵁缁撴瀯 | 5-7 鍛?|
| v0.4.0 | 鏍囧噯搴撴墿灞?| 8-10 鍛?|
| v0.5.0 | 楂樼骇鐗规€э紙闂寘銆侀敊璇鐞嗭級 | 12-16 鍛?|
| v1.0.0 | 鐢熶骇灏辩华 + 宸ュ叿閾?| 寰呭畾 |

---

## 褰撳墠浼樺厛绾ф€荤粨

### 馃敶 楂樹紭鍏堢骇锛堢珛鍗冲紑濮嬶級
1. 鉁?淇鍑芥暟鍙傛暟浼犻€?
2. 鉁?瀹炵幇瀹屾暣鐨勭畻鏈繍绠?
3. 鉁?瀹屽杽浣滅敤鍩熺鐞?
4. 鉁?鏀硅繘 REPL 浣撻獙

### 馃煛 涓紭鍏堢骇锛堟帴涓嬫潵锛?
1. 瀹炵幇 if/else
2. 瀹炵幇寰幆
3. 瀹炵幇鏁扮粍
4. 鎵╁睍鏍囧噯搴?

### 馃煝 浣庝紭鍏堢骇锛堥暱鏈燂級
1. 楂樼骇鐗规€э紙闂寘銆丩ambda锛?
2. 妯″潡绯荤粺
3. 宸ュ叿閾惧拰 IDE 鏀寔

---

**鏇存柊鏃ユ湡**: 2025-11-26
**缁存姢鑰?*: JimLang Development Team
